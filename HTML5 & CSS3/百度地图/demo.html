<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>百度地图</title>
	<style>
		*{
			margin:0;
			padding:0;
		}
		#box{
			width:800px;
			height:600px;
			margin:200px auto;
			border:1px solid #ddd;
		}
	</style>
</head>
<body>
	<input type="button" id='btn' value='请求'/>
	<div id="box"></div>
	<script type="text/javascript" src='http://api.map.baidu.com/api?v=2.0&ak=TFUzKanYlqx7eCkE7SceTqgRuVOkNhHR'></script>

	<script>
		btn.onclick = function(){
			navigator.geolocation.getCurrentPosition(function(position){
				var x = position.coords.latitude;
				var y = position.coords.longitude;

				var map = new BMap.Map('box');
				var pt = new BMap.Point(y,x);
				map.centerAndZoom(pt,11);
				map.addControl(new BMap.MapTypeControl());

				setTimeout(function(){
					map.setZoom(14);
				},2000);
				map.enableScrollWheelZoom(true);
				map.addTileLayer(new BMap.PanoramaCoverageLayer());
					
				var stCtrl = new BMap.PanoramaControl(); //构造全景控件
				stCtrl.setOffset(new BMap.Size(20, 20));
				map.addControl(stCtrl);//添加全景控件
			});
		};
	</script>
</body>
</html>