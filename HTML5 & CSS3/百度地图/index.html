
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="Author" content="TZ-追梦">
		<title>TZ追梦-课件</title>
		<style type="text/css">
			*{
				margin:0;
				padding:0;
			}
			#box{
				width:500px;
				height:500px;
				margin:o auto;
				border:1px solid purple;
			}
		</style>
	</head>
	<body>
		<input type="button" id='btn' value='请求'/>
		<div id='box'></div>
		<script type="text/javascript" src='http://api.map.baidu.com/api?v=2.0&ak=TFUzKanYlqx7eCkE7SceTqgRuVOkNhHR'></script>

		<script type="text/javascript">
			btn.onclick = function(){
				navigator.geolocation.getCurrentPosition(function(position){
					var x = position.coords.latitude;
					var y = position.coords.longitude;
				
					var map = new BMap.Map("box");    // 创建Map实例
					var pt = new BMap.Point(y, x);
					map.centerAndZoom(pt, 11);  // 初始化地图,设置中心点坐标和地图级别
					map.addControl(new BMap.MapTypeControl());   //添加地图类
						
					
					// 百度地图API功能
					setTimeout(function(){
						map.setZoom(14);   
					}, 2000);  //2秒后放大到14级
					map.enableScrollWheelZoom(true);

					// 覆盖区域图层测试
					map.addTileLayer(new BMap.PanoramaCoverageLayer());
					
					var stCtrl = new BMap.PanoramaControl(); //构造全景控件
					stCtrl.setOffset(new BMap.Size(20, 20));
					map.addControl(stCtrl);//添加全景控件
				});
			}
		</script>
	</body>
</html>
